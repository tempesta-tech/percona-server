INSTALL PLUGIN keyring_file SONAME 'keyring_file.so';
call mtr.add_suppression("Plugin keyring_file reported: 'File .*keyring' not found .*");
call mtr.add_suppression("keyring_file initialization failure. Please check if the keyring_file_data points to readable keyring file or keyring file can be created in the specified location. The keyring_file will stay unusable until correct path to the keyring file gets provided");
CREATE TABLESPACE tab02k_e ADD DATAFILE 'tab02k_e.ibd'  FILE_BLOCK_SIZE 02k ENCRYPTION='Y' ;
CREATE TABLESPACE tab04k ADD DATAFILE 'tab04k.ibd'  FILE_BLOCK_SIZE 04k ENCRYPTION='N' ;
CREATE TABLESPACE tab08k ADD DATAFILE 'tab08k.ibd'  FILE_BLOCK_SIZE 08k ENCRYPTION='N' ;
CREATE TABLESPACE tab16k_e ADD DATAFILE 'tab16k_e.ibd'  FILE_BLOCK_SIZE 16k ENCRYPTION='Y' ;
CREATE UNDO TABLESPACE undo_001 ADD DATAFILE 'undo_001.ibu' ;
CREATE UNDO TABLESPACE undo_002 ADD DATAFILE 'undo_002.ibu' ;
CREATE UNDO TABLESPACE undo_003 ADD DATAFILE 'undo_003.ibu' ;
CREATE TABLE tt_1 (d0 DOUBLE, i1 INT AUTO_INCREMENT, v2 VARCHAR(22), f3 FLOAT, f4 FLOAT, g5  BLOB AS  (CONCAT(SUBSTRING(d0,1,2),SUBSTRING(d0,1,2),SUBSTRING(v2,1,2),SUBSTRING(d0,1,1))), INDEX tt_1i0(i1 DESC) , INDEX tt_1i1(d0, g5(6), f4 DESC, f3, v2 DESC) , INDEX tt_1i2(d0)  ) ENCRYPTION='KEYRING' ENCRYPTION_KEY_ID=5 KEY_BLOCK_SIZE=2 ENGINE=INNODB ;
CREATE TABLE tt_2 (v0 VARCHAR(28), INDEX tt_2i0(v0)  ) ENCRYPTION='N' ENGINE=INNODB  ;
CREATE TABLE tt_3 (ipkey INT, i1 INT, t2 BOOL, c3 CHAR(23), f4 FLOAT,  PRIMARY KEY(ipkey), INDEX tt_3i0(c3, i1 DESC) , INDEX tt_3i1(ipkey DESC, t2 DESC)  )ENCRYPTION='KEYRING' KEY_BLOCK_SIZE=2 ENGINE=INNODB ;
CREATE TABLE tt_4 (ipkey INT, f1 FLOAT, v2 VARCHAR(27), lt3 LONGTEXT COLUMN_FORMAT COMPRESSED,  PRIMARY KEY(ipkey), INDEX tt_4i0(f1) , INDEX tt_4i1(v2, ipkey, f1 ASC) , INDEX tt_4i2(ipkey DESC, f1 DESC) , INDEX tt_4i3(v2, ipkey ASC, f1 DESC)  ) ENCRYPTION='N' TABLESPACE=tab04k KEY_BLOCK_SIZE=4 ENGINE=INNODB ;
CREATE TABLE tt_5 (i0 INT, f1 FLOAT, c2 CHAR(28), b3 BLOB COLUMN_FORMAT COMPRESSED, INDEX tt_5i0(c2 ASC, i0, f1) , INDEX tt_5i1(f1, c2) , INDEX tt_5i2(f1, i0 DESC) , INDEX tt_5i3(f1)  ) ENCRYPTION='N' TABLESPACE=tab04k KEY_BLOCK_SIZE=4 ENGINE=INNODB ;
DROP table tt_1, tt_2, tt_3, tt_4, tt_5;
DROP TABLESPACE tab02k_e;
DROP TABLESPACE tab04k;
DROP TABLESPACE tab08k;
DROP TABLESPACE tab16k_e;
ALTER UNDO TABLESPACE undo_001 SET INACTIVE;
ALTER UNDO TABLESPACE undo_002 SET INACTIVE;
ALTER UNDO TABLESPACE undo_003 SET INACTIVE;
DROP UNDO TABLESPACE undo_001;
